<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Configurações da Conta - AlphaFoxXP</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
/* Reset e fonte */
* {margin:0; padding:0; box-sizing:border-box; font-family:'Poppins', sans-serif;}
body {
  background:#0a0a0a; /* Preto premium */
  color:#fff;
  display:flex;
  justify-content:center;
  align-items:center;
  min-height:100vh;
  padding:20px;
  overflow:hidden;
  position:relative;
}

/* Partículas de fundo */
#particles-js {
  position:absolute;
  width:100%;
  height:100%;
  top:0;
  left:0;
  z-index:0;
}

/* Container principal */
.config-container {
  display:flex;
  width:900px;
  max-width:95%;
  border-radius:15px;
  overflow:hidden;
  box-shadow:0 15px 40px rgba(0,0,0,0.6);
  background:linear-gradient(145deg, #111, #1a1a1a);
  position:relative;
  z-index:1;
  transition:all 0.4s ease;
}

/* Sidebar */
.config-sidebar {
  width:250px;
  background:#222;
  padding:20px;
  display:flex;
  flex-direction:column;
  border-right:2px solid #ff6600;
}
.config-sidebar h3 {
  color:#ff6600;
  text-align:center;
  margin-bottom:25px;
  text-shadow:0 0 5px #ff6600;
}
.config-sidebar button {
  background:none;
  border:none;
  color:#ccc;
  padding:12px;
  margin-bottom:12px;
  text-align:left;
  border-radius:8px;
  cursor:pointer;
  font-weight:500;
  transition:0.3s;
  position:relative;
}
.config-sidebar button::before {
  content:'';
  position:absolute;
  left:0;
  top:0;
  height:100%;
  width:4px;
  background:#ff6600;
  border-radius:0 4px 4px 0;
  transform:scaleY(0);
  transition:transform 0.3s ease;
}
.config-sidebar button:hover::before,
.config-sidebar button.active::before { transform:scaleY(1); }
.config-sidebar button:hover, .config-sidebar button.active {
  background:#ff6600;
  color:#111;
  font-weight:600;
}

/* Conteúdo principal */
.config-content {flex:1; padding:30px;}
.tab {display:none; opacity:0; transition:opacity 0.4s ease;}
.tab.active {display:block; opacity:1; animation:fadeIn 0.5s ease forwards;}
@keyframes fadeIn {0%{opacity:0; transform:translateY(20px);}100%{opacity:1; transform:translateY(0);}}

/* Cartões e inputs */
.card {
  background:#222;
  padding:18px;
  border-radius:10px;
  margin-bottom:18px;
  display:flex;
  flex-direction:column;
  box-shadow:0 5px 15px rgba(255,165,0,0.1);
  transition:transform 0.3s ease, box-shadow 0.3s ease;
}
.card:hover {transform:translateY(-5px); box-shadow:0 10px 25px rgba(255,165,0,0.2);}
.card label {margin-bottom:8px; font-weight:600; color:#ff6600;}
.card input, .card select {
  padding:12px;
  border-radius:8px;
  border:none;
  background:#333;
  color:#fff;
  transition:all 0.3s;
}
.card input:focus, .card select:focus {outline:2px solid #ff6600;}

/* Botões */
.save-btn, .back-btn {
  background:#ff6600;
  color:#111;
  border:none;
  padding:12px 22px;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:all 0.3s;
  margin-top:10px;
  box-shadow:0 5px 15px rgba(255,165,0,0.4);
}
.save-btn:hover, .back-btn:hover {background:#e65c00; box-shadow:0 5px 25px rgba(255,165,0,0.6);}
.back-btn {margin-bottom:20px;}

/* Mensagens de sucesso/erro */
.msg {
  margin-top:10px;
  padding:10px;
  border-radius:8px;
  display:none;
  font-weight:600;
  box-shadow:0 3px 10px rgba(0,0,0,0.3);
}
.msg.success {background:#16a085; color:#fff;}
.msg.error {background:#c0392b; color:#fff;}

/* Responsividade */
@media(max-width:850px){
  .config-container {flex-direction:column;}
  .config-sidebar {width:100%; flex-direction:row; overflow-x:auto; border-right:none; border-bottom:2px solid #ff6600;}
  .config-sidebar button {flex:1; margin-right:5px;}
}
</style>
</head>
<body>

<div id="particles-js"></div>

<div class="config-container">
  <!-- Sidebar -->
  <div class="config-sidebar">
    <h3>Menu</h3>
    <button class="active" data-tab="perfil">Perfil</button>
    <button data-tab="senha">Senha</button>
    <button data-tab="personalizacao">Personalização</button>
    <button data-tab="notificacoes">Notificações</button>
  </div>

  <!-- Conteúdo -->
  <div class="config-content">
    <button class="back-btn" onclick="window.history.back()">← Voltar</button>

    <!-- Perfil -->
    <div class="tab active" id="perfil">
      <div class="card">
        <label>Usuário</label>
        <input type="text" id="perfil-username">
      </div>
      <div class="card">
        <label>E-mail</label>
        <input type="email" id="perfil-email">
      </div>
      <div class="card">
        <label>CPF</label>
        <input type="text" id="perfil-cpf" disabled>
      </div>
      <button class="save-btn" id="salvar-perfil">Salvar Alterações</button>
      <div class="msg" id="msg-perfil"></div>
    </div>

    <!-- Senha -->
    <div class="tab" id="senha">
      <div class="card">
        <label>Senha Atual</label>
        <input type="password" id="senha-atual">
      </div>
      <div class="card">
        <label>Nova Senha</label>
        <input type="password" id="nova-senha">
      </div>
      <div class="card">
        <label>Confirmar Senha</label>
        <input type="password" id="confirmar-senha">
      </div>
      <button class="save-btn" id="salvar-senha">Alterar Senha</button>
      <div class="msg" id="msg-senha"></div>
    </div>

    <!-- Personalização -->
    <div class="tab" id="personalizacao">
      <div class="card">
        <label>Tema</label>
        <select id="tema-select">
          <option value="preto-laranja">Preto & Laranja</option>
          <option value="preto-dourado">Preto & Dourado</option>
          <option value="preto-azul">Preto & Azul</option>
        </select>
      </div>
      <div class="card">
        <label>Cor de Destaque</label>
        <input type="color" id="cor-destaque" value="#ff6600">
      </div>
      <button class="save-btn" id="salvar-personalizacao">Salvar Preferências</button>
      <div class="msg" id="msg-personalizacao"></div>
    </div>

    <!-- Notificações -->
    <div class="tab" id="notificacoes">
      <div class="card">
        <label><input type="checkbox" id="notif-email"> Notificações por Email</label>
      </div>
      <div class="card">
        <label><input type="checkbox" id="notif-sms"> Notificações por SMS</label>
      </div>
      <button class="save-btn" id="salvar-notificacoes">Salvar Preferências</button>
      <div class="msg" id="msg-notificacoes"></div>
    </div>
  </div>
</div>

<!-- Particles.js -->
<script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
<script>
particlesJS("particles-js", {
  "particles": {
    "number": { "value": 80, "density": { "enable": true, "value_area": 800 } },
    "color": { "value": ["#ff6600","#ffffff"] },
    "shape": { "type": "circle" },
    "opacity": { "value":0.7,"random":true },
    "size": { "value":4,"random":true },
    "line_linked": { "enable": true, "distance":120, "color":"#ff6600", "opacity":0.4, "width":1 },
    "move": { "enable":true, "speed":2, "direction":"none", "out_mode":"out" }
  },
  "interactivity": {
    "detect_on":"canvas",
    "events": {
      "onhover":{"enable":true,"mode":"repulse"},
      "onclick":{"enable":true,"mode":"push"},
      "resize":true
    }
  },
  "retina_detect":true
});
</script>

<!-- Scripts de funcionalidade -->
<script>
let currentUser = JSON.parse(localStorage.getItem('currentUser'));
if(!currentUser){ alert("Nenhuma conta logada!"); window.location.href="teladelogin.html"; }
document.getElementById('perfil-username').value = currentUser.username || '';
document.getElementById('perfil-email').value = currentUser.email || '';
document.getElementById('perfil-cpf').value = currentUser.cpf || '';

const tabs = document.querySelectorAll('.config-sidebar button');
tabs.forEach(tab => {
  tab.addEventListener('click', ()=>{
    tabs.forEach(t=>t.classList.remove('active'));
    tab.classList.add('active');
    document.querySelectorAll('.tab').forEach(c=>c.classList.remove('active'));
    document.getElementById(tab.dataset.tab).classList.add('active');
  });
});

function showMsg(id,text,tipo){
  const msg = document.getElementById(id);
  msg.textContent = text;
  msg.className = 'msg ' + tipo;
  msg.style.display='block';
  setTimeout(()=>{ msg.style.display='none'; },3000);
}

// Salvar perfil
document.getElementById('salvar-perfil').addEventListener('click',()=>{
  currentUser.username = document.getElementById('perfil-username').value;
  currentUser.email = document.getElementById('perfil-email').value;
  let users = JSON.parse(localStorage.getItem('users'))||[];
  let idx = users.findIndex(u=>u.cpf===currentUser.cpf);
  if(idx!==-1){ users[idx] = currentUser; localStorage.setItem('users', JSON.stringify(users)); }
  localStorage.setItem('currentUser', JSON.stringify(currentUser));
  showMsg('msg-perfil','Perfil atualizado com sucesso!','success');
});

// Alterar senha
document.getElementById('salvar-senha').addEventListener('click', ()=>{
  const atual=document.getElementById('senha-atual').value;
  const nova=document.getElementById('nova-senha').value;
  const conf=document.getElementById('confirmar-senha').value;
  if(atual!==currentUser.password){ showMsg('msg-senha','Senha atual incorreta!','error'); return; }
  if(nova!==conf){ showMsg('msg-senha','Nova senha e confirmação não coincidem!','error'); return; }
  currentUser.password = nova;
  let users = JSON.parse(localStorage.getItem('users'))||[];
  let idx = users.findIndex(u=>u.cpf===currentUser.cpf);
  if(idx!==-1){ users[idx].password=nova; localStorage.setItem('users',JSON.stringify(users)); }
  localStorage.setItem('currentUser',JSON.stringify(currentUser));
  showMsg('msg-senha','Senha alterada com sucesso!','success');
  document.getElementById('senha-atual').value=''; document.getElementById('nova-senha').value=''; document.getElementById('confirmar-senha').value='';
});

// Personalização
document.getElementById('cor-destaque').addEventListener('input', ()=>{ document.body.style.setProperty('--cor-destaque', document.getElementById('cor-destaque').value); });
document.getElementById('salvar-personalizacao').addEventListener('click',()=>{
  localStorage.setItem('tema', document.getElementById('tema-select').value);
  localStorage.setItem('corDestaque', document.getElementById('cor-destaque').value);
  showMsg('msg-personalizacao','Preferências salvas!','success');
});

// Notificações
document.getElementById('salvar-notificacoes').addEventListener('click',()=>{
  localStorage.setItem('notifEmail', document.getElementById('notif-email').checked);
  localStorage.setItem('notifSMS', document.getElementById('notif-sms').checked);
  showMsg('msg-notificacoes','Preferências salvas!','success');
});
</script>

</body>
</html>
